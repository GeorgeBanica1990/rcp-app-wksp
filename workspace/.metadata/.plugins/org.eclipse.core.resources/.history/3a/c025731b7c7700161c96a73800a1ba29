package com.georgeb.rcpapp.parts;

import javax.annotation.PostConstruct;

import org.eclipse.e4.ui.di.Focus;
import org.eclipse.jface.viewers.TableViewer;
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.ModifyEvent;
import org.eclipse.swt.events.ModifyListener;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Event;
import org.eclipse.swt.widgets.Listener;
import org.eclipse.swt.widgets.Table;
import org.eclipse.swt.widgets.TableColumn;
import org.eclipse.swt.widgets.TableItem;
import org.eclipse.swt.widgets.Text;

public class GetGitAddress{

	private Text txtInput;
	private TableViewer tableViewer;
	private Table table;
	public static String repoInfo="No repo yet";
	private Button b1;

	@PostConstruct
	public void createComposite(Composite parent) {
		parent.setLayout(new GridLayout(1, false));

		txtInput = new Text(parent, SWT.BORDER);
		txtInput.setMessage("Enter text to mark part as dirty");
		txtInput.addModifyListener(new ModifyListener() {
			@Override
			public void modifyText(ModifyEvent e) {
				//dirty.setDirty(true);
				System.out.println(txtInput.getText());
			}
			
		});
		b1 = new Button(parent, SWT.PUSH);
		b1.setText("set repo");
		b1.addListener(SWT.Selection, new Listener() {
			@Override
		      public void handleEvent (Event e) {
		        switch (e.type) {
		        case SWT.Selection:
		        	
		        	//tableViewer.add("Currently working on repository:");
		        	//tableViewer.add(txtInput.getText());
//		        	tableViewer.add(table);
		        	ListOfCommits.setData(txtInput.getText());
		    		txtInput.setText("");
		          break;
		        }
		      }

		    });
		txtInput.setLayoutData(new GridData(GridData.FILL_HORIZONTAL));
		table =  new Table(parent, SWT.BORDER_SOLID | SWT.BORDER_SOLID );
		table.setHeaderVisible(true);
		TableColumn column1 = new TableColumn(table, SWT.NONE);
		column1.setText("Currently working on repository:");
		TableItem item1 = new TableItem(table, SWT.NULL);
		TableItem item2 = new TableItem(table, SWT.NULL);
		TableItem item3 = new TableItem(table, SWT.NULL);
	    item1.setText("No repo");
	    item2.setText("Currently working on commit:");
	    item3.setText("No commit");
	    table.getColumn(0).pack();
	    table.setBounds(25, 25, 40, 40);
		tableViewer = new TableViewer(parent);
		//tableViewer.setContentProvider(ArrayContentProvider.getInstance());;
		//tableViewer.setInput(createInitialDataModel());
		//tableViewer.setInput(gitrepo);
		//tableViewer.getTable().setLayoutData(new GridData(GridData.FILL_BOTH));
		tableViewer.add(table);
		
	}

	@Focus
	public void setFocus() {
		tableViewer.getTable().setFocus();
	}
//
////	@Persist
////	public void save() {
////		dirty.setDirty(false);
////		
////	}
//	
//	private List<String> createInitialDataModel() {
//		return Arrays.asList("Sample item 1", "Sample item 2", "Sample item 3", "Sample item 4", "Sample item 5");
//	}

	public static String getInfo(){
		return repoInfo;
	}
	
}
